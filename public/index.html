<html>
  <head>
    <meta charset="utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"
    />
    <title>控制中心</title>
    <script src="javascripts/jquery-3.4.1.min.js"></script>
    <script>
      $(function() {
        $("#open_btn").click(function() {
          $.post(
            "api/open",
            {
              client_id:$("#client").val(),
              io_code: $("#io_code").val(),
              duration: parseInt($("#duration").val())
            },
            function(data) {
              alert(data.message);
            },
            "json"
          );
        });
        $("#close_btn").click(function() {
          $.post(
            "api/close",
            {
              client_id:$("#client").val(),
              io_code: $("#io_code").val()
            },
            function(data) {
              alert(data.message);
            },
            "json"
          );
        });
      });
    </script>
  </head>
  <body>
    <input id="client" value="b827eb170977" />
    <input id="duration" value="60" />
    <select id="io_code">
      <option value="lamp1" selected>灯1</option>
      <option value="lamp2" disabled>灯2</option>
      <option value="pump1">水泵</option>
      <option value="aerator1">增氧机1</option>
      <option value="aerator2">增氧机2</option
      ><option value="feeder1">投喂机</option>
    </select>
    <button id="open_btn">
      打开
    </button>
    <button id="close_btn">
      关闭
    </button>
  </body>
</html>
